!function(e){var n={},t={};e.ajaxq=function(r,a){function i(e){if(n[r])n[r].push(e);else{n[r]=[];var a=e();t[r]=a}}function u(){if(n[r]){var e=n[r].shift();if(e){var a=e();t[r]=a}else delete n[r],delete t[r]}}if("undefined"==typeof a)throw"AjaxQ: queue name is not provided";var o=e.Deferred(),f=o.promise();f.success=f.done,f.error=f.fail,f.complete=f.always;var s=e.extend(!0,{},a);return i(function(){var n=e.ajax.apply(window,[s]);return n.done(function(){o.resolve.apply(this,arguments)}),n.fail(function(){o.reject.apply(this,arguments)}),n.always(u),n}),f},e.each(["getq","postq"],function(n,t){e[t]=function(n,r,a,i,u){return e.isFunction(a)&&(u=u||i,i=a,a=void 0),e.ajaxq(n,{type:"postq"===t?"post":"get",url:r,data:a,success:i,dataType:u})}});var r=function(e){return n.hasOwnProperty(e)},a=function(){for(var e in n)if(r(e))return!0;return!1};e.ajaxq.isRunning=function(e){return e?r(e):a()},e.ajaxq.getActiveRequest=function(e){if(!e)throw"AjaxQ: queue name is required";return t[e]},e.ajaxq.abort=function(r){if(!r)throw"AjaxQ: queue name is required";var a=e.ajaxq.getActiveRequest(r);delete n[r],delete t[r],a&&a.abort()},e.ajaxq.clear=function(e){if(e)n[e]&&(n[e]=[]);else for(var t in n)n.hasOwnProperty(t)&&(n[t]=[])}}(jQuery);